<!doctype html>
<html lang="ko" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <meta property="og:title" content="Bitmask - IamCoder Wiki"/>
    <title>Bitmask - IamCoder Wiki</title>
    <link rel="stylesheet" href="/r/css/style.css">
    <link rel="stylesheet" href="/r/css/content.css">
    <link rel="stylesheet" href="/r/css/variable.css">
    <link rel="stylesheet" href="/r/css/tomorrow-night.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css">
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,600;0,700;0,800;1,300;1,400;1,600;1,700;1,800&display=swap">
    <script>
        function addOnload(fun) {
            let last = window.onload;
            window.onload = function () {
                if (last) last();
                fun();
            }
        }
    </script>
</head>
<body>
<div class="page">
    <div class="top-bar">
        <div class="top-bar-wrap">
            
        </div>
    </div>
    <div class="page-wrap">
        <div class="content">
            <div class="main-wrap">
                <div class="mobile-info">
                    <div class="github-link">
                        <a target="_blank" href="https://github.com/iamcoder-wiki/iamcoder-wiki.github.io/edit/master/src/bitmask.md"><div class="link-button">편집</div></a>
                        <a target="_blank" href="https://github.com/iamcoder-wiki/iamcoder-wiki.github.io/commits/master/src/bitmask.md"><div class="link-button">역사</div></a>
                        <a target="_blank" href="https://github.com/iamcoder-wiki/iamcoder-wiki.github.io/blob/master/src/bitmask.md"><div class="link-button mobile-hide">Github에서 보기</div></a>
                        <a target="_blank" href="https://github.com/iamcoder-wiki/iamcoder-wiki.github.io/issues/new?title=%5BBitmask%5D+"><div class="link-button mobile-hide">토론 생성하기</div><div class="link-button mobile-show">새 토론</div></a>
                        <a target="_blank" href="https://github.com/iamcoder-wiki/iamcoder-wiki.github.io/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+%5BBitmask%5D"><div class="link-button mobile-hide">진행중인 토론</div><div class="link-button mobile-show">토론 보기</div></a>
                    </div>
                    <p>최근 수정 시각: 2020-08-24 17:11:21</p>
                    <div class="contributors">
                        <div class="description"><span>기여자:&nbsp;</span></div><a href="https://github.com/retro3014" target="_blank"><span title="retro3014"><img src="https://github.com/retro3014.png?size=32" width="24" height="24" alt="@retro3014"/></span></a><a href="https://github.com/buttercrab" target="_blank"><span title="buttercrab"><img src="https://github.com/buttercrab.png?size=32" width="24" height="24" alt="@buttercrab"/></span></a>
                    </div>
                </div>
                <main>
                    
<script>
function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

async function writeTitle() {
    let s = ["B_", "Bi_", "Bit_", "Bitm_", "Bitma_", "Bitmas_", "Bitmask_", "Bitmask_", "Bitmask_", "Bitmask_", "Bitmask", "Bitmask", "Bitmask", "Bitmask", "Bitmask_", "Bitmask_", "Bitmask_", "Bitmask_", "Bitmask"];
    let title = document.getElementsByClassName('title')[0];
    for(let i in s) {
        title.innerHTML = s[i];
        await sleep(100);
    }
}

addOnload(writeTitle);
</script>
<h1 class="header title">_</h1>
<h2><a class="header" href="#s-1-" id="s-1-">1. 소개</a></h2>
<p>비트마스크란, 비트를 변경하여 정보를 저장하는 방법을 뜻한다. 비트마스킹에서는 모든 연산에 <a href="/w/Bit%20Operator">Bit Operator</a>를 사용한다.</p>
<h2><a class="header" href="#s-2-" id="s-2-">2. 장점</a></h2>
<p>비트마스크는 다음과 같은 주요 장점이 있습니다.</p>
<ul>
<li>
<p><strong>메모리 사용량의 큰 단축</strong></p>
<p>비트마스크는 하나의 bool 정보를 하나의 비트에 저장할 수 있습니다. 실제 하나의 int형 정수는 \(32bit = 4byte\) 이므로, 1 byte bool 정보 32개(\(1 \times 32 = 32\)(byte))를 int형 정수 1개(4(byte))로 표현하여 메모리 사용량을 줄일 수 있습니다. </p>
</li>
<li>
<p><strong>실행시간의 단축</strong></p>
<p>예를 들어 int형 정수로 비트 연산을 하면 32개의 bool 정보에 대한 연산을 한번에 진행할 수 있기 때문에 연산 횟수가 상수배 줄어들게 됩니다.</p>
</li>
<li>
<p><strong>코드 길이의 단축</strong></p>
<p>비트마스크를 쓸 경우 복잡한 코드가 짧게 줄어들 수 있습니다. 비트마스킹을 잘 사용하면, 코드의 가독성이 향상될 수 있습니다.</p>
</li>
</ul>
<h2><a class="header" href="#s-3-" id="s-3-">3. 코드</a></h2>
<p>비트마스킹으로 배열에서 처리할 수 있는 있는 많은 기능들을 구현해 봅시다. 대부분의 구현들이 간단한 비트 연산 한번으로 가능합니다. 다음 코드를 봅시다.</p>
<pre><code class="language-c++">#include &lt;bits/stdc++.h&gt; 

int Bitmask;

int main(){
    Bitmask = 10; //이진수로 1010
    int n, tmp = Bitmask;
    scanf(&quot;%d&quot;, &amp;n);
    if(Bitmask &amp; (1 &lt;&lt; n)) printf(&quot;arr[%d] is true.\n&quot;, n); //원소의 존재 확인
    
    scanf(&quot;%d&quot;, &amp;n);
    Bitmask |= (1 &lt;&lt; n); //원소 추가
    printf(&quot;%dth(st, nd, rd) element added.\n&quot;, n);
  
    scanf(&quot;%d&quot;, &amp;n);
    Bitmask &amp;= ~(1 &lt;&lt; n); //원소 삭제, 만약 원소가 없으면 그대로
    printf(&quot;%dth(st, nd, rd) element deleted.(if in array)&quot;, n);
    
    scanf(&quot;%d&quot;, &amp;n);
    Bitmask ^= (1 &lt;&lt; n); //원소 토글, if문이 필요 없습니다.
    printf(&quot;%dth(st, nd, rd) element toggled.&quot;, n);

    int Union = (Bitmask | tmp); //합집합, for문 불필요
    
    int Intersection = (Bitmask &amp; tmp); //교집합
    
    int Relative_Component = (Bitmask &amp; ~tmp); //차집합
    
    int Symmetric_Difference = (Bitmask ^ tmp) //대칭차집합
    
    int Complement_Set = ~Bitmask //여집합

    int Min_element = (Bitmask &amp; -Bitmask); //최소원소

    Bitmask &amp;= (Bitmask - 1); //최소원소 지우기

    for(int Sub = Bitmask, i = 1; Sub; Sub = ((Sub - 1) &amp; Bitmask), i++){
        printf(&quot;Subset %d: %d&quot;, i, Sub); //모든 부분집합 순회
    }

    //비트마스킹을 사용할 때는 모든 비트 연산의 주변에 괄호를 치는 것을 추천합니다. 잘못하면 연산자 우선순위 때문에 어이없는 오류가 날 수도 있기 떄문입니다.

}
</code></pre>
<h3><a class="header" href="#s-3-1-" id="s-3-1-">3.1. 코드 설명</a></h3>
<h4><a class="header" href="#s-3-1-1-" id="s-3-1-1-">3.1.1. 원소 확인</a></h4>
<p>Shift 연산을 통해 1비트의 자리를 설정하고, AND연산을 하여 0인지 0이 아닌 다른 값인지 확인하여 원소가 존재하는지 검사할 수 있습니다. 이떄, AND연산의 결과가 꼭 1은 아닙니다. 왜냐하면 AND연산은 참 거짓이 아닌 계산의 결과값, 즉 그 자리에 원소가 있다면 2의 거듭제곱을 반환하기 떄문입니다. </p>
<h4><a class="header" href="#s-3-1-2-" id="s-3-1-2-">3.1.2. 원소 추가</a></h4>
<p>OR 연산을 통해 원소를 추가해 줍니다. 이미 원소가 있다면 아무런 변화가 생기지 않습니다.</p>
<h4><a class="header" href="#s-3-1-3-" id="s-3-1-3-">3.1.3. 원소 삭제</a></h4>
<p>AND 연산을 통해 원소를 삭제해 줍니다. 삭제할 위치의 비트만 1인 상태에서 NOT연산을 취해 준다면 비트가 반전되어 그 비트만 0이 됩니다. 원소가 없는 상태에서 특정 원소를 삭제하려 한다면 아무런 변화가 생기지 않습니다.</p>
<h4><a class="header" href="#s-3-1-4-" id="s-3-1-4-">3.1.4. 원소 반전(토글)</a></h4>
<p>XOR 연산으로 원소를 토글해줍니다. 원소가 1이면 0으로, 0이면 1으로 바꿔준다는 것을 쉽게 알 수 있습니다. 여기서 눈여겨봐야 할 점은, 조건문이 전혀 필요없다는 것입니다. 조건문 없이 원소를 토글할 수 있다는 점에서 코드 길이를 줄일 수 있다는 장점을 확인할 수 있습니다.</p>
<h4><a class="header" href="#s-3-1-5-" id="s-3-1-5-">3.1.5. 합집합</a></h4>
<p>두 집합 사이 OR 연산으로 원소가 둘 중 한 곳에라도 있다면 1로 표시하여 합집합을 계산합니다. </p>
<h4><a class="header" href="#s-3-1-6-" id="s-3-1-6-">3.1.6. 교집합</a></h4>
<p>두 집합 사이 AND 연산으로 원소가 두 곳 모두 있다면 1로 표시하여 교집합을 계산합니다. </p>
<h4><a class="header" href="#s-3-1-7-" id="s-3-1-7-">3.1.7. 차집합</a></h4>
<p>두 번째 집합을 비트반전(NOT) 반전한 다음 AND 연산으로 첫 번째 원소에만 포함한 원소를 구하여 차집합을 계산합니다.</p>
<h4><a class="header" href="#s-3-1-8-" id="s-3-1-8-">3.1.8. 대칭차집합</a></h4>
<p>두 집합 사이 XOR 연산으로 원소의 유무가 다르다면 1로 표시하여 대칭차집합을 계산합니다. </p>
<h4><a class="header" href="#s-3-1-9-" id="s-3-1-9-">3.1.9. 여집합</a></h4>
<p>NOT 연산으로 원소를 반전하여 여집합을 계산합니다.</p>
<h4><a class="header" href="#s-3-1-10-" id="s-3-1-10-">3.1.10. 최소 원소 찾기</a></h4>
<p>최소원소 찾기는 비트마스킹의 장점을 다시 한번 보여주는 좋은 예입니다. 위 식은 보수를 이용한 것으로, 보수가 <code>-N-1</code>으로 표현가능함을 이용하여 가장 작은 원소를 손쉽게 찾을 수 있습니다.</p>
<p>또한, 1을 빼면 최소원소 직전의 0들은 모두 1로 반전되고 최소비트 하나만 0으로 반전되기 떄문에 최소비트를 빠르게 뺄 수도 있습니다. 최소 원소를 구하고 반전시키는 것보다 훨씬 빠릅니다. </p>
<h4><a class="header" href="#s-3-1-11-" id="s-3-1-11-">3.1.11. 시간복잡도</a></h4>
<p>여기까지 모든 연산의 시간복잡도는 모두 \(O(1)\)입니다.</p>
<h4><a class="header" href="#s-3-1-12-" id="s-3-1-12-">3.1.12. 부분집합 순회</a></h4>
<p>마지막으로 부분집합 순회입니다. </p>
<p>먼저 현재 상태를 나타내는 변수에 1을 뺀다면 최하위 비트와 그 밑의 0들은 전부 반전됩니다. 따라서 최소 원소의 유무가 바뀝니다. 그 후 원래 집합과의 교집합을 구한다면, 그 원래 집합에 속하지 않던 원소들은 모두 0이 됩니다. 그리하여 모든 부분집합을 순회할 수 있습니다.</p>
<p>시간복잡도는 \(O(2^{N})\)입니다.</p>
<h2><a class="header" href="#s-4-" id="s-4-">4. 예제</a></h2>
<p>비트마스킹은 주로 동적계획법, 즉 다이나믹 프로그래밍과 같이 자주 쓰입니다. 다음 예제를 봅시다. 이 문제는 <a href="https://www.acmicpc.net/problem/2098" class="outer">외판원 순회</a> 문제입니다.</p>
<p>이 문제의 풀이 방법은 비트마스크와 다이나믹 프로그래밍입니다. 먼저 시작 도시를 정한 후, 그 도시로 부터 갈 수 있는 방법을 완전탐색 해 나갑니다. 이떄, 그냥 일반적인 완전탐색은 시간이 엄청나게 오래 걸리므로, 다이나믹 프로그래밍을 사용합니다. 점화식은 다음과 같습니다.</p>
<p>\(TSP(curr, visited) = min(TSP(next, visited \cup next) + dist[curr][next]) \)</p>
<p>\((0 \leq next \leq N - 1, next \neq curr, next \notin visited)\)</p>
<p>현재 도시의 순회 최솟값을 알기 위해 다음 돌아가는 모든 경로를 탐색한 후 그 값을 DP에 저장하면 문제가 풀릴 수 있습니다. 이떄, 집합 visited를 비트마스킹으로 구현할 수 있습니다.</p>
<p>이 코드는 DP의 원소의 개수가 \(2^{N} \times N\)이고 이를 각 도시마다 한 번씩 N번 탐색하여 총 시간복잡도는 \(O(2^{N} \times N^{2})\)입니다. 만약 다이나믹기법을 쓰지 않았다면 모두 일일이 탐색해야 하므로 시간복잡도는 \(O(N!)\)이 되었을 것입니다. 아직 느리기는 하지만, 확실히 빨라졌습니다. 여기에 비트마스킹으로 연산속도까지 빨라졌으니, 문제에서 주어진 <code>N</code>의 범위쯤은 거뜬합니다.</p>

                </main>
            </div>

            <div class="sidebar-wrap">
                <nav class="toc">
                    <ul><li><a href="#s-1-">1. 소개</a></li><li><a href="#s-2-">2. 장점</a></li><li><a href="#s-3-">3. 코드</a><ul><li><a href="#s-3-1-">3.1. 코드 설명</a><ul><li><a href="#s-3-1-1-">3.1.1. 원소 확인</a></li><li><a href="#s-3-1-2-">3.1.2. 원소 추가</a></li><li><a href="#s-3-1-3-">3.1.3. 원소 삭제</a></li><li><a href="#s-3-1-4-">3.1.4. 원소 반전(토글)</a></li><li><a href="#s-3-1-5-">3.1.5. 합집합</a></li><li><a href="#s-3-1-6-">3.1.6. 교집합</a></li><li><a href="#s-3-1-7-">3.1.7. 차집합</a></li><li><a href="#s-3-1-8-">3.1.8. 대칭차집합</a></li><li><a href="#s-3-1-9-">3.1.9. 여집합</a></li><li><a href="#s-3-1-10-">3.1.10. 최소 원소 찾기</a></li><li><a href="#s-3-1-11-">3.1.11. 시간복잡도</a></li><li><a href="#s-3-1-12-">3.1.12. 부분집합 순회</a></li></ul></li></ul></li><li><a href="#s-4-">4. 예제</a></li></ul>
                </nav>
                <svg class="toc-marker" width="200" height="200" xmlns="http://www.w3.org/2000/svg">
                    <path id="toc-path" stroke-width="2" fill="transparent" stroke-dasharray="0, 0, 0, 1000"
                          stroke-linecap="round" stroke-linejoin="round" transform="translate(-0.5, -0.5)"/>
                </svg>
                <p>
                    최근 수정 시각: 2020-08-24 17:11:21
                </p>
                <div class="contributors">
                    <div class="description"><span>기여자:&nbsp;</span></div><a href="https://github.com/retro3014" target="_blank"><span title="retro3014"><img src="https://github.com/retro3014.png?size=32" width="24" height="24" alt="@retro3014"/></span></a><a href="https://github.com/buttercrab" target="_blank"><span title="buttercrab"><img src="https://github.com/buttercrab.png?size=32" width="24" height="24" alt="@buttercrab"/></span></a>
                </div>
                <div class="github-link">
                    <a target="_blank" href="https://github.com/iamcoder-wiki/iamcoder-wiki.github.io/edit/master/src/bitmask.md"><div class="link-button">편집</div></a>
                    <a target="_blank" href="https://github.com/iamcoder-wiki/iamcoder-wiki.github.io/commits/master/src/bitmask.md"><div class="link-button">역사</div></a>
                    <a target="_blank" href="https://github.com/iamcoder-wiki/iamcoder-wiki.github.io/blob/master/src/bitmask.md"><div class="link-button">Github에서 보기</div></a>
                    <a target="_blank" href=https://github.com/iamcoder-wiki/iamcoder-wiki.github.io/issues/new?title=%5BBitmask%5D+"><div class="link-button">토론 생성하기</div></a>
                    <a target="_blank" href="https://github.com/iamcoder-wiki/iamcoder-wiki.github.io/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+%5BBitmask%5D"><div class="link-button">진행중인 토론</div></a>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="/r/js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Google Analytics -->
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-174669347-1', 'auto');
        ga('send', 'pageview');
    </script>
    <!-- End Google Analytics -->

<script src="https://unpkg.com/@popperjs/core@2"></script>
<script src="https://unpkg.com/tippy.js@6"></script>
<script type="text/javascript" src="/r/js/wiki.js"></script>
<script>
    (function footnote() {
        let map = {};
        let def = document.getElementsByClassName("footnote-definition");

        for (let i = 0; i < def.length; i++) {
            let id = def[i].id.substr(2);
            map[id] = def[i].children[1];
        }

        let ref = document.getElementsByClassName("footnote-reference");

        for (let i = 0; i < ref.length; i++) {
            let id = ref[i].children[0].id;
            let content = map[id.substr(2)];
            tippy(ref[i], {
                theme: 'footnote',
                content: content.innerHTML,
                allowHTML: true,
                interactive: true,
                interactiveBorder: 5,
            });
        }
    })();
</script>
</body>
</html>