<!doctype html>
<html lang="ko" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <meta property="og:title" content="DFS Numbering - IamCoder Wiki"/>
    <title>DFS Numbering - IamCoder Wiki</title>
    <link rel="stylesheet" href="/r/css/style.css">
    <link rel="stylesheet" href="/r/css/variable.css">
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.2/build/styles/androidstudio.min.css">
    <!--    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css">-->
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,600;0,700;0,800;1,300;1,400;1,600;1,700;1,800&display=swap">
    <script>
        function addOnload(fun) {
            let last = window.onload;
            window.onload = function () {
                if (last) last();
                fun();
            }
        }
    </script>
</head>
<body>
<div class="page">
    <div class="top-bar-w">
        <div class="top-bar">
            
                <div class="logo"><a href="/"><img src="/logo.png" alt="DFS Numbering - IamCoder Wiki" height="33"/></a></div>
            
            <div class="search-w">
                <div class="search-input-w hide"><input id="t-s-input" placeholder="Search"></div>
                <div class="search" id="t-s-button">
                    <div class="icon-w">
                        <div class="circle"></div>
                        <div class="stick"></div>
                    </div>
                </div>
                <div class="search-result-w hide" id="t-search-result"></div>
            </div>
        </div>
    </div>
    <div class="content-w">
        <div class="content">
            <div class="main">
                <div class="header hl">
                    <div class="gh-buttons">
                        <a target="_blank" href="https://github.com/iamcoder-wiki/iamcoder-wiki.github.io/edit/master/src/dfs-numbering.md"><div class="button">편집</div></a>
                        <a target="_blank" href="https://github.com/iamcoder-wiki/iamcoder-wiki.github.io/commits/master/src/dfs-numbering.md"><div class="button">역사</div></a>
                        <a target="_blank" href="https://github.com/iamcoder-wiki/iamcoder-wiki.github.io/blob/master/src/dfs-numbering.md"><div class="button hs">Github에서 보기</div></a>
                        <a target="_blank" href="https://github.com/iamcoder-wiki/iamcoder-wiki.github.io/issues/new?title=%5BDFS Numbering%5D+"><div class="button hs">토론 생성하기</div><div class="button hm">새 토론</div></a>
                        <a target="_blank" href="https://github.com/iamcoder-wiki/iamcoder-wiki.github.io/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+%5BDFS Numbering%5D"><div class="button hs">진행중인 토론</div><div class="button hm">토론 보기</div></a>
                    </div>
                    <p> 최근 수정 시각: 2020-09-07 15:56:20 </p>
                    <div class="contributors"> <div class="description"><span>기여자:&nbsp;</span></div><a href="https://github.com/retro3014" target="_blank"><span title="retro3014"><img src="https://github.com/retro3014.png?size=32" width="24" height="24" alt="@retro3014"/></span></a> </div>
                </div>
                <main>
                    
<script>
function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

async function writeTitle() {
    let s = ["D_", "DF_", "DFS_", "DFS _", "DFS N_", "DFS Nu_", "DFS Num_", "DFS Numb_", "DFS Numbe_", "DFS Number_", "DFS Numberi_", "DFS Numberin_", "DFS Numbering_", "DFS Numbering_", "DFS Numbering_", "DFS Numbering_", "DFS Numbering", "DFS Numbering", "DFS Numbering", "DFS Numbering", "DFS Numbering_", "DFS Numbering_", "DFS Numbering_", "DFS Numbering_", "DFS Numbering"];
    let title = document.getElementsByClassName('title')[0];
    for(let i in s) {
        title.innerHTML = s[i];
        await sleep(100);
    }
}

addOnload(writeTitle);
</script>
<h1 class="heading title">_</h1>
<h2 class="heading"><a href="#s-1-" id="s-1-">1.</a> 소개</h2>
<p>그래프를 <a href="/w/Tree">Tree</a>처럼 만들거나 <a href="/w/Tree">Tree</a>에서 다양한 연산을 할 때 <a href="/w/DFS">DFS</a>를 사용하여 노드의 번호를 매길 수 있는데, 이를 DFS Numbering이라고 한다.</p>
<p>DFS Numbering을 하면 각 노드는 두 가지 값을 갖는데, 이 노드를 처음 방문한 시간(pre-visited time)과, 이 노드에서 마지막으로 떠날 때 시간(post-visited time)을 저장하고 있다. </p>
<h2 class="heading"><a href="#s-2-" id="s-2-">2.</a> Code</h2>
<pre><code class="language-c++">int num; // time
int pre[MAX_N+1], post[MAX_N+1]; // pre-visited time, post-visited time
vector&lt;int&gt; gp[MAX_N+1]; // graph data
bool vst[MAX_N+1]; // visited?

void dfs(int x){
 pre[x] = ++num;
 vst[x] = true;
 for(int i : gp[x]){
   if(!vst[i]) dfs(i);
 }
 post[x] = ++num;
}

</code></pre>
<h2 class="heading"><a href="#s-3-" id="s-3-">3.</a> Tree에서 노드를 구간으로 표현</h2>
<p>트리에서 어떤 노드 <code>v</code>를 잡으면, <code>v</code>의 모든 자식들은 <code>pre, post</code> 값이 <code>pre[v], post[v]</code> 사이에 존재한다. 따라서 <em>어떤 노드를 루트로 하는 서브트리에 어떤 처리를 하는 경우</em>를 <em><a href="/w/Segment%20Tree">Segment Tree</a>의 특정 구간에 어떤 처리를 하는 경우</em>로 바꿔 문제를 풀 수 있다.</p>
<h2 class="heading"><a href="#s-4-" id="s-4-">4.</a> DFS Tree</h2>
<p><a href="https://codeforces.com/blog/entry/68138" class="outer">Codeforces의 관련 내용</a></p>
<p>그래프에서 DFS Numbering을 해주면 연결 그래프에서 하나의 트리가 만들어지는데, 이를 DFS Tree라고 한다. 무방향 그래프에서는 Tree Edge와 Back Edge(Tree Edge가 아닌 모든 에지)로 에지가 나뉘며, 방향 그래프에서는 Tree Edge, Back Edge, Forward Edge, Cross Edge로 에지 종류가 나뉜다. </p>
<ul>
<li>Tree Edge : DFS Tree를 만드는 과정에서 사용된 에지 \(|V|-1\)개</li>
<li>Back Edge : 어떤 정점에서 자신의 조상을 향하는 에지</li>
<li>Forward Edge : 반대로 어떤 정점에서 자신의 자식을 향하는 에지 (Tree Edge는 포함 X)</li>
<li>Cross Edge : Tree Edge, Back Edge, Forward Edge가 아닌 에지 (에지를 통해 연결된 두 노드가 부모-자식 관계를 갖지 않는 에지)</li>
</ul>
<h3 class="heading"><a href="#s-4-1-" id="s-4-1-">4.1.</a> 무방향 그래프</h3>
<p>무방향 그래프에서는 Tree Edge가 아닌 모든 에지는 어떤 정점과 그 정점의 조상을 잇는 Back Edge가 된다는 조건을 사용하여 다양한 문제를 쉽게 풀 수 있다.</p>
<h4 class="heading"><a href="#s-4-1-1-" id="s-4-1-1-">4.1.1.</a> 단절선 찾기</h4>
<p>DFS Tree는 Tarjan의 단절선 알고리즘의 핵심 아이디어로 사용된다.</p>
<p>Back Edge는 단절선이 될 수 없다. Back Edge를 제거해도 DFS Tree 구조에 의해 컴포넌트가 분리되지 않기 때문이다. 부모 <code>u</code>와 자식 <code>v</code>를 잇는 Tree Edge가 단절선이 되기 위해서는 <code>v</code>의 자식과 <code>u</code>의 부모를 잇는 Back Edge가 존재하지 않아야 한다. 이 경우 그 Tree Edge가 없어지면 그래프가 두 부분으로 나눠지기 때문에 단절선이 된다.</p>
<h4 class="heading"><a href="#s-4-1-2-" id="s-4-1-2-">4.1.2.</a> 양방향 그래프를 단방향 그래프로 변환</h4>
<p><a href="https://codeforces.com/contest/118/problem/E" class="outer">다음</a>과 같은 문제를 생각해보자. 양방향 그래프가 주어졌을 때 임의의 정점에서 다른 모든 정점으로 이동할 수 있도록 모든 에지의 방향을 결정해주는 문제다. </p>
<p>단절선이 존재하면 단절선의 방향을 어떻게 결정하던 임의의 정점에서 다른 모든 정점으로 이동할 수 있다는 조건이 만족할 수 없기 때문에 조건을 만족하도록 에지의 방향을 결정해줄 수 없다. 단절선이 존재하지 않는 경우, DFS Tree를 만들고 Tree Edge는 자식을 향하도록 하고 Back Edge는 조상을 향하도록 에지의 방향을 결정해 주면 조건을 만족하도록 임의의 정점에서 다른 모든 정점으로 이동할 수 있다<sup class="footnote-reference"><a id="b-1">1</a></sup>.</p>
<h3 class="heading"><a href="#s-4-2-" id="s-4-2-">4.2.</a> 방향 그래프</h3>
<p>방향 그래프의 경우 무방향 그래프와 비교하여 Forward Edge, Cross Edge가 추가된다. 4가지 에지에 대해 케이스를 잘 나누어 분석하면 쉽게 풀 수 있는 문제들이 많다.</p>
<h4 class="heading"><a href="#s-4-2-1-" id="s-4-2-1-">4.2.1.</a> 사이클</h4>
<p>DFS Tree를 만들었을 때 Back Edge가 존재하는 방향 그래프는 사이클을 포함한다는 것을 알 수 있다.</p>
<div class="footnote-definition" id="f-1"><sup class="footnote-definition-label"><a href="#b-1">1</a></sup>
<p>트리의 루트에서부터 Tree Edge를 타고 모든 에지에 도달할 수 있으며, 모든 정점에서 Back Edge들을 통해 루트에 도달할 수 있기 때문</p>
</div>

                </main>
            </div>
            <div class="side-bar hm hs">
                <nav class="toc"><ul><li><a href="#s-1-">1. 소개</a></li><li><a href="#s-2-">2. Code</a></li><li><a href="#s-3-">3. Tree에서 노드를 구간으로 표현</a></li><li><a href="#s-4-">4. DFS Tree</a><ul><li><a href="#s-4-1-">4.1. 무방향 그래프</a><ul><li><a href="#s-4-1-1-">4.1.1. 단절선 찾기</a></li><li><a href="#s-4-1-2-">4.1.2. 양방향 그래프를 단방향 그래프로 변환</a></li></ul></li><li><a href="#s-4-2-">4.2. 방향 그래프</a><ul><li><a href="#s-4-2-1-">4.2.1. 사이클</a></li></ul></li></ul></li></ul></nav>
                <svg class="toc-marker" width="200" height="200" xmlns="http://www.w3.org/2000/svg">
                    <path id="toc-path" stroke-width="2" fill="transparent" stroke-dasharray="0, 0, 0, 1000"
                          stroke-linecap="round" stroke-linejoin="round" transform="translate(-0.5, -0.5)"/>
                </svg>
                <p> 최근 수정 시각: 2020-09-07 15:56:20 </p>
                <div class="contributors"> <div class="description"><span>기여자:&nbsp;</span></div><a href="https://github.com/retro3014" target="_blank"><span title="retro3014"><img src="https://github.com/retro3014.png?size=32" width="24" height="24" alt="@retro3014"/></span></a> </div>
                <div class="gh-buttons">
                    <a target="_blank" href="https://github.com/iamcoder-wiki/iamcoder-wiki.github.io/edit/master/src/dfs-numbering.md"><div class="button">편집</div></a>
                    <a target="_blank" href="https://github.com/iamcoder-wiki/iamcoder-wiki.github.io/commits/master/src/dfs-numbering.md"><div class="button">역사</div></a>
                    <a target="_blank" href="https://github.com/iamcoder-wiki/iamcoder-wiki.github.io/blob/master/src/dfs-numbering.md"><div class="button">Github에서 보기</div></a>
                    <a target="_blank" href=https://github.com/iamcoder-wiki/iamcoder-wiki.github.io/issues/new?title=%5BDFS Numbering%5D+"><div class="button">토론 생성하기</div></a>
                    <a target="_blank" href="https://github.com/iamcoder-wiki/iamcoder-wiki.github.io/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+%5BDFS Numbering%5D"><div class="button">진행중인 토론</div></a>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="/r/js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="https://unpkg.com/@popperjs/core@2"></script>
<script src="https://unpkg.com/tippy.js@6"></script>
<script type="text/javascript" src="/r/js/wiki.js"></script>
<script>
    function footnote() {
        let map = {};
        let def = document.getElementsByClassName("footnote-definition");

        for (let i = 0; i < def.length; i++) {
            let id = def[i].id.substr(2);
            map[id] = `<sup class="footnote-reference"><a href="#f-` + id + `">` + id + `</a></sup>` + def[i].children[1].innerHTML;
        }

        let ref = document.getElementsByClassName("footnote-reference");

        for (let i = 0; i < ref.length; i++) {
            let id = ref[i].children[0].id;
            let content = map[id.substr(2)];
            tippy(ref[i], {
                theme: 'footnote',
                content: content,
                allowHTML: true,
                interactive: true,
                interactiveBorder: 5,
            });
        }
    }

    window.MathJax = {
        startup: {
            ready: () => {
                MathJax.startup.defaultReady();
                MathJax.startup.promise.then(footnote);
            }
        }
    };
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Google Analytics -->
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-174669347-1', 'auto');
        ga('send', 'pageview');
    </script>
    <!-- End Google Analytics -->

</body>
</html>